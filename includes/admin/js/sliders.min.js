jQuery(document).ready(function(b){var a={manager:function(c){if(c){b("#slider_blvd #manage .ajax-mitt").html(c)}else{b.ajax({type:"POST",url:ajaxurl,data:{action:"themeblvd_update_slider_table"},success:function(d){b("#slider_blvd #manage .ajax-mitt").html(d)}})}},delete_slider:function(e,f,c){var d=b("#manage_sliders").find('input[name="_wpnonce"]').val();tbc_confirm(themeblvd.delete_slider,{confirm:true},function(g){if(g){b.ajax({type:"POST",url:ajaxurl,data:{action:"themeblvd_delete_slider",security:d,data:e},success:function(h){h=h.split("[(=>)]");b("#slider_blvd #manage").prepend(h[1]);b("#slider_blvd #manage .ajax-update").fadeIn(500,function(){setTimeout(function(){b("#slider_blvd #manage .ajax-update").fadeOut(500,function(){b("#slider_blvd #manage .ajax-update").remove()})},1500)});b("#slider_blvd .displaying-num").text(h[0]);if(f=="submit"){b("#manage_sliders").find('input[name="posts[]"]').each(function(){if(b(this).is(":checked")){var j=b(this).val();if(b("#edit-tab").hasClass(j+"-edit")){b("#edit-tab").hide()}b(this).closest("tr").remove()}})}else{if(f=="click"){var i=e.replace("posts%5B%5D=","");if(b("#edit-tab").hasClass(i+"-edit")){b("#edit-tab").hide()}b("#row-"+i).remove()}}b("#manage_sliders option").removeAttr("checked");if(c=="edit_page"){b("#slider_blvd .group").hide();b("#slider_blvd .group:first").fadeIn();b("#slider_blvd .nav-tab-wrapper a:first").addClass("nav-tab-active")}}})}})},edit:function(c,d){var d=d.split("[(=>)]");b("#slider_blvd .nav-tab-wrapper a.nav-edit-slider").text(themeblvd.edit_slider+": "+c).addClass(d[0]+"-edit");b("#slider_blvd #edit_slider .ajax-mitt").html(d[1]).themeblvd("options","setup");b("#slider_blvd .slide-element-check input").each(function(){a.elements(b(this))});b("#slider_blvd .slide-set-type select").each(function(){a.type(b(this))});b("#slider_blvd .widget").themeblvd("widgets");b("#slider_blvd .widget").themeblvd("options","media-uploader");b("#sortable").sortable({handle:".widget-name"});postboxes.add_postbox_toggles(pagenow,{pbshow:a.show_widget,pbhide:a.hide_widget});b("#slider_blvd .nav-tab-wrapper a").removeClass("nav-tab-active");b("#slider_blvd .nav-tab-wrapper a.nav-edit-slider").show().addClass("nav-tab-active");b("#slider_blvd .group").hide();b("#slider_blvd .group:last").fadeIn()},hide_widget:function(c){if(b("#"+c).hasClass("postbox-publish")){return}b("#"+c+" .tb-widget-content").hide()},show_widget:function(c){b("#"+c+" .tb-widget-content").show()},type:function(d){var g,h,e=d.closest(".widget"),f=d.val(),c=d.closest(".widget-content").find(".slide-position-"+f).val();name=d.find('option[value="'+f+'"]').text();e.removeClass("type-image type-video type-custom");e.addClass("type-"+f);e.find(".slide-set-type strong").text(name);e.find(".widget-name h3").removeClass("image video custom").addClass(f).text(name);e.find(".slide-summary").removeClass("image video").hide().text("");if(f=="custom"){e.find(".slide-media").hide();e.find(".slide-custom").fadeIn("fast")}else{if(f=="image"){g="video";h=e.find(".slide-set-image .image-title").val();e.find(".slide-summary").addClass("image");if(h){e.find(".slide-summary").text(h).fadeIn(200)}e.find(".slide-position-image").show();e.find(".slide-crop").show();e.find(".slide-position-video").hide();e.find(".slide-video-height").hide();e.find(".image-note").show();if(e.find(".slide-elements .element-image_link input").is(":checked")){e.find(".slide-elements .element-image_link").show()}else{e.find(".slide-elements .element-image_link:first").show()}e.find(".slide-elements-warning").hide();e.find(".slide-elements").show();if(e.find(".slide-position").val()=="full"){e.find(".slide-crop").show();e.find(".element-button").hide()}else{e.find(".slide-crop").hide();e.find(".element-button.slide-element-header").show().find("input").each(function(){a.elements(b(this))})}}else{if(f=="video"){g="image";h=e.find(".slide-set-video .video-link input").val();e.find(".slide-summary").addClass("video");if(h){e.find(".slide-summary").text(h).fadeIn(200)}e.find(".slide-elements .element-image_link").hide();e.find(".slide-position-video").show();e.find(".slide-position-image").hide();e.find(".slide-video-height").show();e.find(".slide-crop").hide();e.find(".image-note").hide();e.find(".slide-element-header").show();if(c=="full"){e.find(".slide-elements").hide();e.find(".slide-elements-warning").show()}else{e.find(".slide-elements-warning").hide();e.find(".slide-elements").show()}}}e.find(".slide-set-media .slide-set-"+g).hide();e.find(".slide-set-media .slide-set-"+f).show();e.find(".slide-custom").hide();e.find(".slide-media").fadeIn("fast")}},position:function(d){if(d.closest(".widget").hasClass("type-video")){var f=d.val(),e=d.closest(".widget-content");e.find(".slide-elements .element-image_link").hide();if(f=="full"){e.find(".slide-elements").hide();e.find(".slide-elements-warning").show()}else{e.find(".slide-elements-warning").hide();e.find(".slide-elements").show()}}else{if(d.closest(".widget").hasClass("type-image")){var c=d.closest(".widget-content").find(".slide-crop");if(d.val()=="full"){d.closest(".widget-content").find(".slide-crop").show();d.closest(".widget-content").find(".element-button").hide()}else{d.closest(".widget-content").find(".slide-crop").hide();d.closest(".widget-content").find(".element-button.slide-element-header").show().find("input").each(function(){a.elements(b(this))})}}}},elements:function(c){var d=c.closest("tr").next("tr");if(c.is(":checked")){d.show()}else{d.hide()}}};b("#slider_blvd .widget").themeblvd("widgets");b("#slider_blvd .nav-tab-wrapper a.nav-edit-slider").hide();if(typeof(localStorage)!="undefined"){if(localStorage.getItem("activetab")=="#edit"){b("#slider_blvd .group").hide();b("#slider_blvd .group:first").fadeIn();b("#slider_blvd .nav-tab-wrapper a:first").addClass("nav-tab-active")}}b("#slider_blvd").on("change",".slide-set-type select",function(){a.type(b(this))});b("#slider_blvd").on("change",".slide-position",function(){a.position(b(this))});b("#slider_blvd").on("change",".slide-element-check input",function(){a.elements(b(this))});b("#slider_blvd").on("click","#manage .edit-tb_slider",function(){var c=b(this).closest("tr").find(".post-title .title-link").text(),d=b(this).attr("href"),d=d.replace("#","");b.ajax({type:"POST",url:ajaxurl,data:{action:"themeblvd_edit_slider",data:d},success:function(e){a.edit(c,e)}});return false});b("#slider_blvd").on("click",".row-actions .trash a",function(){var c=b(this).attr("href"),e=c.replace("#",""),d="posts%5B%5D="+e;a.delete_slider(d,"click");return false});b("#slider_blvd").on("submit","#manage_sliders",function(){var d=b(this).find('select[name="action"]').val(),c=b(this).serialize();if(d=="trash"){a.delete_slider(c,"submit")}return false});b("#optionsframework #add_new_slider").submit(function(){var e=b(this),g=e.serialize(),f=e.find(".ajax-loading"),c=e.find('input[name="options[slider_name]"]').val(),d=e.find('input[name="_wpnonce"]').val();if(!c){tbc_confirm(themeblvd.no_name,{textOk:"Ok"});return false}b.ajax({type:"POST",url:ajaxurl,data:{action:"themeblvd_add_slider",security:d,data:g},beforeSend:function(){f.fadeIn("fast")},success:function(h){if(h=="error_type"){tbc_confirm(themeblvd.invalid_slider,{textOk:"Ok"})}else{b("body").animate({scrollTop:0},100,function(){a.edit(c,h);tbc_alert.init(themeblvd.slider_created,"success");e.find('input[name="options[slider_name]"]').val("")});a.manager()}f.hide()}});return false});b("#optionsframework").on("click","#add_new_slide",function(){var f=b(this),i,d,c,h,e=f.parent().find(".ajax-overlay"),g=f.parent().find(".ajax-loading");type=f.attr("href"),type=type.replace("#","");b.ajax({type:"POST",url:ajaxurl,data:{action:"themeblvd_add_slide",data:type},beforeSend:function(){e.fadeIn("fast");g.fadeIn("fast")},success:function(j){d=j.split('<div id="');c=d[1].split('" class="widget slide-options"');h=c[0];b("#slider_blvd #edit #sortable .no-item-yet").remove();b("#slider_blvd #edit #sortable").append(j);b("#"+h+" .slide-set-type select").each(function(){a.type(b(this))});b("#"+h).themeblvd("widgets").themeblvd("options","media-uploader");b("#"+h).fadeIn();g.fadeOut("fast");e.fadeOut("fast")}});return false});b("#optionsframework").on("submit","#edit_slider",function(){var d=b(this),f=d.serialize(),e=d.find(".publishing-action .ajax-loading"),c=d.find('input[name="_wpnonce"]').val();b.ajax({type:"POST",url:ajaxurl,data:{action:"themeblvd_save_slider",security:c,data:f},beforeSend:function(){e.fadeIn("fast")},success:function(g){g=g.split("[(=>)]");b("#slider_blvd #edit").prepend(g[1]);current_name=b("#slider_blvd #post_title").val();b("#slider_blvd #edit-tab").text(themeblvd.edit_slider+": "+current_name);b("#slider_blvd .postbox-publish h3").text(themeblvd.publish+" "+current_name);b("#slider_blvd .postbox-slider-info #post_name").val(g[0]);b("body").animate({scrollTop:0},50,function(){b("#slider_blvd #edit .ajax-update").fadeIn(500,function(){setTimeout(function(){b("#slider_blvd #edit .ajax-update").fadeOut(500,function(){b("#slider_blvd #edit .ajax-update").remove()})},1500)})});e.fadeOut("fast");a.manager()}});return false});b("#slider_blvd #edit").on("click",".delete_slider",function(){var c=b(this).attr("href"),e=c.replace("#",""),d="posts%5B%5D="+e;a.delete_slider(d,"click","edit_page");return false});b("#slider_blvd #edit").on("change",".video-link input",function(){var c=b(this).closest(".widget"),d=b(this).val();if(d){c.find(".slide-summary").text(d).fadeIn(200)}else{c.find(".slide-summary").hide().text("")}})});